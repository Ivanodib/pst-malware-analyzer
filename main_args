import argparse
import os
import requests

def downloader(i):
    url = "https://virusshare.com/hashfiles/VirusShare_{:05d}".format(i)+".md5"
    print(url+"\n")
    response = requests.get(url)
    hashes = response.text
    #TODO: aggiungere salvataggio file

def main():
	parser = argparse.ArgumentParser(description='tool to download VirusShare hash files and search them for specified hashes')
	parser.add_argument('-s','--search', help='hash to search for in local repository (hint: specify any number of hashes)', nargs="+")
	parser.add_argument('-u','--update', help='updates local hash containing files (--update all/missing/10,11,12/0-20)')
	parser.add_argument('-l','--latest', help='sets latest VirusShare file released (default: 389)', default='389')
	parser.add_argument('-d','--directory', help='sets working directory (default: VirusShare_Hashes)', default='VirusShare_Hashes')

	args = parser.parse_args()
	directory = args.directory
	latest = args.latest

	if not os.path.exists(directory):
		os.makedirs(directory)

	if args.search is None and args.update is None:
		parser.print_help()

if __name__ == "__main__":
	main()